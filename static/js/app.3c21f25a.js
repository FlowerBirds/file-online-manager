(function(){"use strict";var e={3498:function(e,t,o){var l=o(7195),a=o(5114),i=o.n(a),n=o(306),r=o(6891),s=o(8772),c=o.n(s),u=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("HomePage")],1)},p=[],d=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home-page"},[t("el-container",{staticStyle:{height:"100%"}},[t("el-aside",{attrs:{width:"400px"}},[t("el-header",{attrs:{height:"50px"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.uploadFile}},[e._v("上传")]),t("el-button",{attrs:{type:"primary"},on:{click:e.createFolder}},[e._v("创建")]),t("div",{staticStyle:{height:"30px",padding:"0px 0","line-height":"30px"}},[t("span",{staticClass:"el-icon-coordinate"},[e._v("当前位置： ")]),t("span",{staticClass:"current-path"},[e._v(e._s(e.currentPath))])])],1),t("el-main",[t("el-tree",{ref:"directoryTree",attrs:{data:e.treeData,props:e.defaultProps,load:e.loadNode,"node-key":"id",lazy:""},on:{"node-click":e.handleNodeClick}})],1)],1),t("el-main",{},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{prop:"name",label:"名称",width:"300"}}),t("el-table-column",{attrs:{prop:"size",label:"大小"}}),t("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row.isDir?t("i",{staticClass:"el-icon-folder"}):e._e(),o.row.isDir?e._e():t("i",{staticClass:"el-icon-document"})]}}])}),t("el-table-column",{attrs:{prop:"modTime",label:"修改时间",width:"420"}}),t("el-table-column",{attrs:{label:"操作",width:"350"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-delete",title:"删除"},on:{click:function(t){return e.deleteFile(o.row)}}}),t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit",title:"重命名"},on:{click:function(t){return e.renameFile(o.row)}}}),t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copyFile(o.row)}}}),e.checkFileType(o.row.name,[".zip"])?t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-grape",title:"解压"},on:{click:function(t){return e.unzipFile(o.row)}}}):e._e()]}}])})],1)],1)],1),t("el-dialog",{attrs:{title:"上传文件",visible:e.dialogVisible,width:"930px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("LargeFileUpload",{attrs:{currentPath:e.currentPath}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1)],1)},h=[],f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"large-file-upload"},[t("uploader",{ref:"uploader",staticClass:"uploader-example",attrs:{options:e.options,autoStart:!0,"file-status-text":e.fileStatusText},on:{"file-added":e.onFileAdded,"file-success":e.onFileSuccess,"file-error":e.onFileError,"file-progress":e.onFileProgress}},[t("uploader-unsupport"),t("uploader-drop",[t("p",[e._v("拖动文件到这里上传")]),t("uploader-btn",[e._v("选择文件")]),t("uploader-btn",{attrs:{directory:!0}},[e._v("选择文件夹")])],1),t("uploader-list",[t("div",{staticClass:"file-panel",class:{collapse:e.collapse}},[t("div",{staticClass:"file-title"},[t("p",{staticClass:"file-list-title"},[e._v("文件列表")]),t("div",{staticClass:"operate"},[t("el-button",{attrs:{type:"text",title:e.collapse?"折叠":"展开"},on:{click:e.operate}},[t("i",{staticClass:"icon",class:e.collapse?"el-icon-caret-bottom":"el-icon-caret-top"})])],1)]),t("ul",{staticClass:"file-list",class:e.collapse?"uploader-list-ul-show":"uploader-list-ul-hidden"},[e._l(e.uploadFileList,(function(e){return t("li",{key:e.id},[t("uploader-file",{ref:"files",refInFor:!0,class:"file_"+e.id,attrs:{file:e,list:!0}})],1)})),e.uploadFileList.length?e._e():t("div",{staticClass:"no-file"},[t("i",{staticClass:"icon icon-empty-file"}),e._v(" 暂无待上传文件 ")])],2)])])],1)],1)},m=[],g=(o(7658),o(9853));const y=2147483648,b=31457280;var v={name:"TestComponent",data(){return{options:{target:"http://localhost:8081/api/manager/file/upload1?path="+this.currentPath,testChunks:!0,uploadMethod:"post",chunkSize:b,simultaneousUploads:3,checkChunkUploadedByResponse:()=>!1,parseTimeRemaining:function(e,t){return t.replace(/\syears?/,"年").replace(/\days?/,"天").replace(/\shours?/,"小时").replace(/\sminutes?/,"分钟").replace(/\sseconds?/,"秒")},generateUniqueIdentifier:function(){return(0,g.Z)()}},fileStatusTextObj:{success:"上传成功",error:"上传错误",uploading:"正在上传",paused:"停止上传",waiting:"等待中"},uploadIdInfo:null,uploadFileList:[],fileChunkList:[],collapse:!0}},props:{currentPath:{type:String,default:"."}},methods:{onFileAdded(e){this.uploadFileList.push(e),e.size>y&&this.$message({type:"info",message:"文件较大请耐心等待"}),this.$nextTick((()=>{e.resume()}))},onFileSuccess(){console.log("上传成功")},onFileError(e,t,o,l){console.log("上传出错："+o),console.log(e,t,o,l)},onFileProgress(){},fileStatusText(e){return"md5"===e?"校验MD5":this.fileStatusTextObj[e]},operate(){!1===this.collapse?this.collapse=!0:this.collapse=!1}}},F=v,x=o(1001),_=(0,x.Z)(F,f,m,!1,null,"df5f9154",null),w=_.exports,C={name:"HomePage",data(){return{treeData:[],tableData:[],defaultProps:{label:"name"},currentPath:".",dialogVisible:!1}},props:{},components:{LargeFileUpload:w},mounted(){this.listFile("")},methods:{handleClose(e){this.$confirm("确认关闭？").then((()=>{e()})).catch((()=>{}))},loadNode(e,t){let o=e.data.path;o||(o=""),this.$http.get("./api/manager/folder/list?path="+o,{}).then((e=>{t(e.data.data)}),(e=>{console.log(e.body)}))},handleNodeClick(e){this.currentPath=e.path,this.listFile(e.path)},deleteFile(e){let t=this;this.$confirm("是否删除文件："+e.name,"确认").then((function(){t.$http.delete("./api/manager/file/delete?path="+e.path,{path:e.path}).then((e=>{console.log(e.body),t.listFile(t.currentPath)}),(e=>{console.log(e.body),t.$alert(e.body.message,"错误",{confirmButtonText:"确定",type:"error"})}))}))},renameFile(e){this.$prompt("请确认文件名称","提示",{inputValue:e.name,confirmButtonText:"确定",cancelButtonText:"取消"}).then((({value:t})=>{this.$http.post("./api/manager/file/rename",{path:e.path,name:t}).then((e=>{console.log(e.body),this.listFile(this.currentPath)}),(e=>{console.log(e.body),this.$alert(e.body.message,"错误",{confirmButtonText:"确定",type:"error"})}))})).catch((()=>{this.$message({type:"info",message:"取消重命名"})}))},copyFile(e){let t=this;this.$prompt("请输入新的文件名称","提示",{inputValue:e.name,confirmButtonText:"确定",cancelButtonText:"取消"}).then((({value:o})=>{t.$http.post("./api/manager/file/copy",{path:e.path,name:o}).then((e=>{console.log(e.body),t.listFile(this.currentPath)}),(e=>{t.listFile(this.currentPath),t.$alert(e.body.message,"错误",{confirmButtonText:"确定",type:"error"})}))})).catch((()=>{this.$message({type:"info",message:"取消重命名"})}))},uploadFile(){this.dialogVisible=!0},checkFileType(e,t){t||(t=[".zip",".rar",".gz",".tar",".7z"]);const o=e.slice(e.lastIndexOf(".")).toLowerCase();return t.includes(o)},unzipFile(e){let t=this;t.$http.post("./api/manager/file/unzip",{path:e.path,name:e.name}).then((()=>{var e=t.$refs.directoryTree.getCurrentNode();t.loadNode({data:e},(o=>{t.$refs.directoryTree.updateKeyChildren(e.id,o)})),t.listFile(t.currentPath)})).catch((e=>{t.$alert(e.body.message||e.body,"错误",{confirmButtonText:"确定",type:"error"})}))},deleteFolder(){let e=this;e.$http.post("./api/manager/folder/delete",{}).then((()=>{var t=e.$refs.directoryTree.getCurrentNode();e.loadNode({data:t},(o=>{e.$refs.directoryTree.updateKeyChildren(t.id,o)})),e.listFile(e.currentPath)})).catch((e=>{console.log(e.body)}))},renameFolder(){this.$http.post("./api/manager/folder/rename",{}).then((e=>{console.log(e.body)}),(e=>{console.log(e.body)}))},createFolder(){let e=this,t=function(t){return new Promise((function(o,l){e.$http.post("./api/manager/folder/create?path="+t,{}).then((t=>{console.log(t.body),e.listFolder(),e.listFile(this.currentPath),o(t.body)}),(e=>{console.log(e.body),l(new Error(e.body))}))}))};this.$prompt("请输入文件夾名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((({value:e})=>{let o=this.currentPath+"/"+e;return t(o)})).catch((()=>{this.$message({type:"info",message:"取消创建"})}))},listFolder(){let e=this;this.$http.get("./api/manager/folder/list",{}).then((t=>{e.treeData=t.data.data}),(e=>{console.log(e.body)}))},listFile(e){let t=this;this.$http.get("./api/manager/file/list?path="+e,{}).then((e=>{t.tableData=e.data.data}),(e=>{console.log(e.body)}))}}},T=C,k=(0,x.Z)(T,d,h,!1,null,"99f91cec",null),$=k.exports,P={name:"App",data(){return{msg:{name:"Welcome to Your Vue.js App"}}},components:{HomePage:$}},S=P,O=(0,x.Z)(S,u,p,!1,null,null,null),z=O.exports;l["default"].use(i()),l["default"].use(r.Z,n.Z),l["default"].use(c()),l["default"].config.productionTip=!1,new l["default"]({render:e=>e(z)}).$mount("#app")}},t={};function o(l){var a=t[l];if(void 0!==a)return a.exports;var i=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=e,function(){o.amdO={}}(),function(){var e=[];o.O=function(t,l,a,i){if(!l){var n=1/0;for(u=0;u<e.length;u++){l=e[u][0],a=e[u][1],i=e[u][2];for(var r=!0,s=0;s<l.length;s++)(!1&i||n>=i)&&Object.keys(o.O).every((function(e){return o.O[e](l[s])}))?l.splice(s--,1):(r=!1,i<n&&(n=i));if(r){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[l,a,i]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var l in t)o.o(t,l)&&!o.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,l){var a,i,n=l[0],r=l[1],s=l[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(a in r)o.o(r,a)&&(o.m[a]=r[a]);if(s)var u=s(o)}for(t&&t(l);c<n.length;c++)i=n[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(u)},l=self["webpackChunkfile_online_manager_web"]=self["webpackChunkfile_online_manager_web"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=o.O(void 0,[998],(function(){return o(3498)}));l=o.O(l)})();
//# sourceMappingURL=app.3c21f25a.js.map